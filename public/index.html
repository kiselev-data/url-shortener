<!DOCTYPE html>
<html>
<head>
    <title>Short your URL:</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
</head>

<body>

<h1>URL Shortener Service</h1>
<h2>Enter your URL:</h2>
<form action="/api/v1/urls" id="searchForm">
    <input type="text" name="longUrl" placeholder="Enter your URL..."/>
    <input type="submit" value="Convert">
</form>
<br>
<!-- the result of the search will be rendered inside this div -->
<div id="result"> <a id="link_result"></a></div>

<script>


$(function() {
$('#searchForm').submit(function(event) {
    event.preventDefault();
    event.stopImmediatePropagation();


    value = $(this).find( "input[name='longUrl']" ).val();
    submit_url = $(this).attr( "action" );


    // Send the data using post
    $.ajax({
            type: 'post',
            url: submit_url,
            data: JSON.stringify({longUrl: value}),
            contentType: "application/json; charset=utf-8",
            traditional: true,
            success: function (data) {
                var shortUrl = data.shortUrl;
                var origin   = window.location.origin;
                var resultUrl = origin + submit_url + "/" + shortUrl;
                $( "#link_result" ).empty().append( resultUrl );
                $( "#link_result" ).attr("href", resultUrl );
            }
        });
});
});

</script>

</body>
</html>